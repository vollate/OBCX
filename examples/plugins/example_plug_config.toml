# OBCX Bridge Plugin Configuration

# Plugin directories
[plugin_directories]
local = "./plugins"
build = "./build/plugins"

# Bot configurations - both QQ and Telegram bots are needed for bridge
[bots.qq_bot]
type = "qq"
enabled = true
plugins = ["qq_to_tg"]

[bots.qq_bot.connection]
type = "websocket"
host = "127.0.0.1"
port = 3001
access_token = "" # leave empty if no access token for llonebot
secret = ""
use_ssl = false
timeout = 30000
heartbeat_interval = 5000

[bots.telegram_bot]
type = "telegram"
enabled = true
plugins = ["tg_to_qq"]

[bots.telegram_bot.connection]
type = "http"
host = "api.telegram.org"
port = 443
access_token = "2222"
use_ssl = true
timeout = 30000

# Proxy configuration for Telegram (optional)
proxy_host = "127.0.0.1"
proxy_port = 20122
proxy_type = "http"

# QQ to Telegram Plugin configuration
[plugins.qq_to_tg]
enabled = true
callbacks = ["on_message", "on_notice"]

[plugins.qq_to_tg.config]
database_file = "bridge_bot.db"
enable_retry_queue = false      # Disabled to avoid scheduling conflicts

# Telegram to QQ Plugin configuration
[plugins.tg_to_qq]
enabled = true
callbacks = ["on_message", "on_notice"]

[plugins.tg_to_qq.config]
database_file = "bridge_bot.db"
enable_retry_queue = false      # Disabled to avoid scheduling conflicts

[group_mappings]

[[group_mappings.group_to_group]]
telegram_group_id = "-4840311903"
qq_group_id = "807272412"
mode = "group_to_group"
show_qq_to_tg_sender = true
show_tg_to_qq_sender = false

[[group_mappings.group_to_group]]
telegram_group_id = "DDD"
qq_group_id = "22222"
mode = "group_to_group"
show_qq_to_tg_sender = true
show_tg_to_qq_sender = false

[[group_mappings.group_to_group]]
telegram_group_id = "CCC"
qq_group_id = "113413"
mode = "group_to_group"
show_qq_to_tg_sender = true
show_tg_to_qq_sender = true

[[group_mappings.topic_to_group]]
telegram_group_id = "AAA"
mode = "topic_to_group"
show_qq_to_tg_sender = true
show_tg_to_qq_sender = true

# Topics for the above Telegram group
[[group_mappings.topics]]
telegram_group_id = "AA"  # 明确指定属于哪个群
telegram_topic_id = 1
qq_group_id = "140320158"
show_qq_to_tg_sender = true
show_tg_to_qq_sender = true

[[group_mappings.topics]]
telegram_group_id = "AAA"  # 明确指定属于哪个群
telegram_topic_id = 33
qq_group_id = "111"
show_qq_to_tg_sender = true
show_tg_to_qq_sender = false

